
<!-- Modal Editar Trabajador -->
<div class="modal fade" id="editWorkerModal" tabindex="-1" aria-labelledby="editWorkerModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title fw-bold" id="editWorkerModalLabel">{{ STRINGS.MODAL_EDIT_WORKER_TITLE }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="closeModalBtn"></button>
            </div>
            <div class="modal-body">
                <form id="editWorkerForm">
                    {% csrf_token %}
                    <!-- Datos Personales -->
                    <h6 class="fw-bold mb-3 text-primary">{{ STRINGS.SECTION_PERSONAL_DATA }}</h6>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="name" class="form-label">{{ STRINGS.NAME_LABEL }}<span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="name" value="{{ worker.name }}" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="first_surname" class="form-label">{{ STRINGS.FIRST_SURNAME_LABEL }}<span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="first_surname" value="{{ worker.first_surname }}" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="second_surname" class="form-label">{{ STRINGS.SECOND_SURNAME_LABEL }}</label>
                            <input type="text" class="form-control" id="second_surname" value="{{ worker.second_surname }}">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="nif_nie" class="form-label">{{ STRINGS.NIF_NIE_LABEL }}<span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="nif_nie" value="{{ worker.nif_nie }}" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="birthdate" class="form-label">{{ STRINGS.BIRTHDATE_LABEL }}<span class="text-danger">*</span></label>
                            <input type="date" class="form-control" id="birthdate" value="{{ worker.birthdate|date:'Y-m-d' }}" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="gender" class="form-label">{{ STRINGS.GENDER_LABEL }}</label>
                            <select class="form-select" id="gender">
                                <option value="">{{ STRINGS.SELECT_OPTION }}</option>
                                <option value="H" {% if worker.gender == 'H' %}selected{% endif %}>{{ STRINGS.GENDER_MAN }}</option>
                                <option value="M" {% if worker.gender == 'M' %}selected{% endif %}>{{ STRINGS.GENDER_WOMAN }}</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="role" class="form-label">{{ STRINGS.ROLE_LABEL }}</label>
                            <select class="form-select" id="role">
                                <option value="">{{ STRINGS.SELECT_OPTION }}</option>
                                <option value="Director" {% if worker.role == 'Director' %}selected{% endif %}>{{ STRINGS.ROLE_DIRECTOR }}</option>
                                <option value="Coordinador" {% if worker.role == 'Coordinador' %}selected{% endif %}>{{ STRINGS.ROLE_COORDINATOR }}</option>
                                <option value="Enfermero" {% if worker.role == 'Enfermero' %}selected{% endif %}>{{ STRINGS.ROLE_NURSE }}</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="shift" class="form-label">Turno</label>
                            <select class="form-select" id="shift">
                                <option value="">{{ STRINGS.SELECT_OPTION }}</option>
                                <option value="Mañana" {% if worker.shift == 'Mañana' %}selected{% endif %}>Mañana</option>
                                <option value="Tarde" {% if worker.shift == 'Tarde' %}selected{% endif %}>Tarde</option>
                                <option value="Noche" {% if worker.shift == 'Noche' %}selected{% endif %}>Noche</option>
                            </select>
                        </div>
                    </div>

                    <!-- Datos de Contacto -->
                    <h6 class="fw-bold mb-3 text-primary mt-4">{{ STRINGS.SECTION_CONTACT_DATA }}</h6>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="address" class="form-label">{{ STRINGS.ADDRESS_LABEL }}</label>
                            <input type="text" class="form-control" id="address" value="{{ worker.address }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="locality" class="form-label">{{ STRINGS.LOCALITY_LABEL }}</label>
                            <input type="text" class="form-control" id="locality" value="{{ worker.locality }}">
                        </div>
                    </div>

                    <div class="row">
                        <div class="col mb-3">
                            <label for="province" class="form-label">{{ STRINGS.PROVINCE_LABEL }}</label>
                            <select class="form-select" id="province">
                                <option value="">{{ STRINGS.SELECT_OPTION }}</option>
                                <option value="Huesca" {% if worker.province == 'Huesca' %}selected{% endif %}>Huesca</option>
                                <option value="Teruel" {% if worker.province == 'Teruel' %}selected{% endif %}>Teruel</option>
                                <option value="Zaragoza" {% if worker.province == 'Zaragoza' %}selected{% endif %}>Zaragoza</option>
                            </select>
                        </div>
                        <div class="col mb-3">
                            <label for="country" class="form-label">{{ STRINGS.COUNTRY_LABEL }}</label>
                            <input type="text" class="form-control" id="country" value="España" readonly>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col mb-3">
                            <label for="phone" class="form-label">{{ STRINGS.PHONE_LABEL }}</label>
                            <input type="tel" class="form-control" id="phone" value="{{ worker.phone }}">
                        </div>
                        <div class="col mb-3">
                            <label for="email" class="form-label">{{ STRINGS.EMAIL_LABEL }}</label>
                            <input type="email" class="form-control" id="email" value="{{ worker.email }}">
                        </div>
                    </div>

                    <!-- Datos Laborales -->
                    <h6 class="fw-bold mb-3 text-primary mt-4">{{ STRINGS.SECTION_EMPLOYMENT_DATA }}</h6>
                    <div class="row">
                        <div class="col mb-3">
                            <label for="social_security_number" class="form-label">{{ STRINGS.SOCIAL_SECURITY_NUMBER_LABEL }}</label>
                            <input type="text" class="form-control" id="social_security_number" value="{{ worker.social_security_number }}">
                        </div>
                        <div class="col mb-3">
                            <label for="account_number" class="form-label">{{ STRINGS.ACCOUNT_NUMBER_LABEL }}</label>
                            <input type="text" class="form-control" id="account_number" value="{{ worker.account_number }}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col mb-3">
                            <label for="hire_date" class="form-label">{{ STRINGS.HIRE_DATE_LABEL }}</label>
                            <input type="date" class="form-control" id="hire_date" value="{% if worker.hire_date %}{{ worker.hire_date|date:'Y-m-d' }}{% endif %}">
                        </div>
                        <div class="col mb-3">
                            <label for="disability_percentage" class="form-label">{{ STRINGS.DISABILITY_PERCENTAGE_LABEL }}</label>
                            <input type="number" class="form-control" id="disability_percentage" min="0" max="100" step="0.01" value="{% if worker.disability_percentage %}{{ worker.disability_percentage }}{% endif %}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col mb-3">
                            <label for="curriculum" class="form-label">{{ STRINGS.CURRICULUM_LABEL }}</label>
                            <input type="file" class="form-control" id="curriculum" accept=".pdf">
                            {% if worker.curriculum %}
                                <div class="mt-2">
                                    <small class="text-muted d-block">{{ STRINGS.CURRENT_FILE }}: {{ worker.curriculum.name }}</small>
                                    <button type="button" class="btn btn-sm btn-outline-danger mt-1" id="removeCurriculumBtn">
                                        <i class="bi bi-trash"></i> {{ STRINGS.REMOVE_CURRICULUM }}
                                    </button>
                                    <input type="hidden" id="remove_curriculum" value="false">
                                </div>
                            {% endif %}
                        </div>
                        <div class="col mb-3">
                            <label for="profile_photo" class="form-label">{{ STRINGS.PROFILE_PHOTO_LABEL }}</label>
                            <input type="file" class="form-control" id="profile_photo" accept="image/*">
                            {% if worker.profile_photo %}
                                <div class="mt-2">
                                    <small class="text-muted d-block">{{ STRINGS.CURRENT_PHOTO }}: {{ worker.profile_photo.name }}</small>
                                    <button type="button" class="btn btn-sm btn-outline-danger mt-1" id="removePhotoBtn">
                                        <i class="bi bi-trash"></i> {{ STRINGS.REMOVE_PHOTO }}
                                    </button>
                                    <input type="hidden" id="remove_photo" value="false">
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="cancelModalBtn">
                    <i class="bi bi-x-circle"></i> {{ STRINGS.BUTTON_CANCEL }}
                </button>
                <button type="button" class="btn btn-primary" id="saveEditWorkerBtn">
                    <i class="bi bi-save"></i> {{ STRINGS.BUTTON_SAVE_CHANGES }}
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Confirmar Eliminación -->
<div class="modal fade" id="deleteWorkerModal" tabindex="-1" aria-labelledby="deleteWorkerModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="deleteWorkerModalLabel">
                    <i class="bi bi-exclamation-triangle me-2"></i>{{ STRINGS.MODAL_TITLE_CONFIRM_DELETE }}
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="mb-3">{{ STRINGS.MODAL_DELETE_QUESTION_WORKER }}</p>
                <div class="alert alert-warning">
                    <strong>{{ worker.get_full_name }}</strong><br>
                    <small>{{ worker.nif_nie }}</small>
                </div>
                <p class="text-muted small mb-0">
                    <i class="bi bi-info-circle me-1"></i>
                    {{ STRINGS.MODAL_DELETE_INFO }}
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i> {{ STRINGS.BUTTON_CANCEL }}
                </button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
                    <i class="bi bi-trash"></i> {{ STRINGS.BUTTON_DELETE }}
                </button>
            </div>
        </div>
    </div>
</div>